## 스위치 커펌 가이드

참조1. https://opencourse.tistory.com/541?category=352066

참조2. https://opencourse.tistory.com/244

참조3. https://hagobogoo.tistory.com/152

**3줄 요약**

> - 스위치의 복구모드를 활용해서 본래의 에뮬낸드 대신 Hekate로 부팅 (**Hekate**)
> - 닌텐도의 기본에뮬과 유사하지만 커펌이 가능하도록 락이 제거된 에뮬로 낸드를 구성하여 닌텐도를 기동 (**Atmosphere**)
> - 기본 패키지에서 제공되는 커스텀 펌웨어와 기타 커스텀 펌웨어를 설치할 수 있도록 돕는 홈브류 앱 세팅 (**Tinfoix**)

___

## 사전 준비

- SD CARD
  
  > SD CARD는 사용전에 파일 시스템을 **FAT32** 방식으로 바꾸어 놓아야 함
  > 
  > 또한 위에 3줄요약에서 서술한 바와 같이 커펌용 낸드로 우회하기 위해서 파티션이 분리되어 있어야 함 (대략 30gb 정도)
  > 
  > 이때 사용하기 좋은 프로그램으로 **EaseUS Partition Master** 가 있음 (참조 2)
  > 
  > 메인 파티션에 atmosphere 및 스위치의 에뮬낸드 파일을 복사

## 우회 부팅

> 스위치의 전원을 차단한 뒤 복구모드로 재부팅 (RCM 지그 필요)
> 
> 참조1 에서 다운 받을 수 있는 TegraRcmGUI를 이용해 페이로드를 주입 // 또는 RCM 로더 사용
> 
> 만약 부팅 중 lp0, minerva 같은 문제가 발생한다면 SD의 메인파티션 파일을 다시 복사해 보는 것을 권장

## 에뮬 낸드 구성

> 우선 Hekate를 사용하여 에뮬 낸드가 설치될 SD 카드의 파티션을 구성 (리눅스?)
> 
> 기기의 고유 키파일을 백업한 후 신규 파티션에 에뮬 낸드를 생성 
> 
> Hekate를 통해서 에뮬낸드로 부팅 (이후에도 RCM 지그를 통해 우회 부팅하여야 커펌 활용 가능)
> 
> 부팅 된 에뮬낸드에서 CFW (Atmosphere)를 클릭하면, 완료
> 
> 설정 > 본체 > 시스템버전을 체크하면, **AMS 0.##.# | E** (`<AtMoSphere> <버전> | <에뮬낸드>`) 로 변경되었음을 확인 가능

## 홈브류 앱 세팅

> 홈브류앱 **hbmenu**이 일반 타이틀처럼 풀메모리 엑세스를 전부 사용할 수 있어야 대용량 데이터 처리가 용이
> 
> 이는 **Tinleaf**에서 `hbmenu.nsp`를 수동으로 설치함으로써 해결 가능하고, 이후에는 풀메모리를 활용 가능
> 
> 이후에는 위에서 백업해둔 키파일을 가지고 `Lockpick` 앱으로 고유 키파일을 생성 (백업도 진행)
> 
> 이외 쓸만한 기본 앱으로 `mtp-server-nx`가 있으며, 데스크탑과 파일 공유를 가능케 함

## 틴포X

> 참조 3. 참조
